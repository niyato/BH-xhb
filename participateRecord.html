<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>儿童成长智能分析系统</title>
    <link rel="stylesheet" type="text/css" href="Content/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="Content/css/theme.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="Content/css/lhgcalendar.css">
    <script src="Content/Scripts/lhgcore.min.js"></script>
    <script src="Content/Scripts/lhgcalendar.min.js"></script>

	<!--//活动柱状图-->
	 <script src="js/jquery-3.1.1.js"></script>
	 <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts-all-3.js"></script>
     <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
     <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
     <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
     <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
     <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>

    <!--预览视频-->
    <link rel="stylesheet" type="text/css" href="css/jquery.fancybox.css">
    <link rel="stylesheet" type="text/css" href="css/lanrenzhijia.css">
    

    <style type="text/css">
        #line-chart {
            height: 300px;
            width: 800px;
            margin: 0px auto;
            margin-top: 1em;
        }
        .navbar-default .navbar-brand, .navbar-default .navbar-brand:hover {
            color: #fff;
        }
    </style>
    
    <style type="text/css">
        .demo1{
            height:20px;
        }
    </style>
</head>

<body class="theme-blue">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header"><!--header-->
            <div class="top">
                <div class="f1"><a class="logo" href="">幼儿园科学保教（运动睡眠）大数据分析系统</a></div>
                <div class="fr signOut">
					<img src="" width="30px" height="30px">
                    <span class="Gname"></span> | <span class="Tname"></span>老师
                    <a class="mL10" id="logout">退出</a>
                </div>
            </div>
            <!--header_end-->
        </div>
        <div class="navbar-collapse collapse" style="height: 1px;">
        </div>
    </div>
    <!--content-->
    <div id="wrap">
        <!--左侧导航-->
        <div class="tab-content">
            <div class="leftMenu" id="leftMenu">
                <ul id="menudiv" class="mT10">
                    <li class="li_mo1">
                        <a href="daily-personal.html" style="color:#ffffff;">学生活动数据分析</a>
                    </li>
                    <li class="li_mo" >
                        <a id="move" href="daily-personal.html"><span>运动强度/密度分析</span></a>
                    </li>
                    <li class="li_slp">
                        <a id="sleep" href="sleep.html"><span>睡眠分析</span></a>
                    </li>
                     <li class="li_act">
                        <a id="activity" href="activity.html"><span>体育活动分析</span></a>
                    </li>
                    <li class="li_eat">
                        <a id="diet" href="diet.html"><span>饮食分析</span></a>
                    </li>
                     <li class="li_gym">
                        <a id="gym" href="gym.html"><span>体操分析</span></a>
                    </li>
                    <li class="li_abn">
                        <a id="abn" href="abnormal.html"><span>异常分析</span></a>
                    </li>
                    <li class="li_att">
                        <a id="att" href="attendance.html"><span>安全考勤</span></a>
                    </li>
					<li class="li_mo1">
                        <a href="areaAnalysis.html" style="color:#ffffff;">学生区角数据分析</a>
                    </li>
					<li>
                        <a id="areabuild" href="areaAnalysis.html"><span>区角建构<span></a>
                    </li>
					<li>
                        <a id="areaAnalysis" href="participateRecord.html"><span style="padding-bottom:5px; border-bottom:1px solid #000;">区角分析<span></a>
                    </li>
					<li>
                        <a id="areaAnalysis" href="areaAngleAngalysis.html"><span>区域活动分析&记录<span></a>
                    </li>
					<li>
                        <a id="areaAnalysis" href="developmentAanalysisRecord.html"><span>学生个体发展分析&记录<span></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>   

    <div class="rightContent">
        <div class="rightContentBox2" style="">
            <div style="border-bottom:1px solid #D2DAE0;">
                <div class="fr1" style=""><span style=" float:left;display:block; width:16px; height:20px; border-color:#fb8c00; background-color:#fb8c00;"></span><p style="float:left; margin-left:20px;">学生参与区角记录</p></div>
				<div>
					</br>
					<div class="de" id="activityCondition" style="margin-bottom:50px;" >
					   
						<div class="" style="float:left;">    
							<label>年级选择</label>
							<select id="activityGrade" onchange="queryClassInfoByGrade()" style="text-align:center; width:237px; height:30px;border:1px solid lightgrey; border-radius:5px; ">
								<option value="0">全部年级</option>
								<option value="1">托班</option>
								<option value="2">小班</option>
								<option value="3">中班</option>
								<option value="4">大班</option>
							</select>
						</div>
						<div class="" style="float:left; margin-left:30px; margin-right:30px;">
							<label>班级选择</label>
							<select id="activityClass" style="width:237px; height:30px; border-radius:5px; border:1px solid lightgrey; text-align:center">
								<option value="0">选择班级</option>

							</select>
						</div>
						<div class="" style="">
							<label>学生姓名</label>
							<input id="activityStudent" type="text" style=" width:237px; height:30px;border:1px solid lightgrey; border-radius:5px;" value="" placeholder="支持对姓名的模糊搜索" />
						</div>
                        <br/>
						<div class="" style="">
							<label>区角选择</label>
							<select id="activityStatus" style="width:237px; height:30px; border-radius:5px; border:1px solid lightgrey; text-align:center">
								<option value="0">请选择区角类型</option>

							</select>
						</div>
						 <div class="" id="activityDate" style=" margin-top:30px;">
							<label>记录时间</label>
							<input type="text" style="border:1px solid lightgrey; border-radius:10px; text-align:center;" id="input1" readonly onchange="" value="" placeholder="开始时间" /> -- <input type="text" style="border:1px solid lightgrey; border-radius:10px; text-align:center;" id="input2" readonly onchange="" value="" placeholder="结束时间" />
						</div>    
						<div class="" style="width:123px; height:38px; border-radius:5px; background-color:#2baf2b; border-color:#0a8f08; float:right; margin-top: -30px;">
							<input type="button" id="select" style=" width:123px; height:38px; border-radius:5px; background-color:#2baf2b; border-color:#0a8f08; color:#FFF;" onclick="queryRecord()" value="搜索"  />
						</div>   
					</div>
				</div>
            </div>

        

        <div class="applicationbox" style="text-align:center;">
            <table width="100%" border="0" cellspacing="0" class="accTabbox" id="studentAreaAngleRecord_table">
                <thead >
                    <tr id="topic">
                        <th scope="col">年级名称</th>
                        <th scope="col">班级名称</th>
                        <th scope="col">学生名称</th>
                        <th scope="col">区角名称</th>
                        <th scope="col">进入时间</th>
                        <th scope="col">离开时间</th>
                        <th scope="col">停留时长</th>

                        <th scope="col">视频预览</th>
                    </tr>
                </thead>
                <tbody >  
                    				
                </tbody>
                
            </table>

            <input type="hidden" id="pagenum">

        </div>

        <!--分页-->
        <div id="divpage" class="flickr" style="text-align:right"></div>
        <div style="text-align:center">
            <span id="selectdata_record" hidden="hidden" style="font-size:18px;">没有满足条件的数据</span>
        </div>
    </div>
    <!--content_end-->

</body>
</html>

<script src="js/check-login.js" ></script>
<script src="js/moment.min.js" ></script>
<script src="js/underscore-min.js" ></script>
<!-- <script src="js/services.js" ></script> -->
<script src="js/graph.js" ></script>
<script src="js/activity-zztu.js"></script>
<script src="java_js/javaApi.js"></script>

<script src="js/jquery-2.1.4.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/iscroll.js"></script>

<script src="js/jquery-1.3.2.min.js"></script>
<script src="js/flowplayer-3.1.1.min.js"></script>
<script src="js/jquery.fancybox-1.2.1.pack.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/fancyplayer.js"></script>

<!--分页-->
<link rel="stylesheet" type="text/css" href="Content/css/pagination.css">
<script src="Content/Scripts/jquery.pagination.js"></script>



<script type="text/javascript">
    bhyf.checkLogin();
    //    xhb.page.init();

    var page_id = 0;     //页面索引初始值
    var pageSize = 10;
    $(function () {        
	    queryAllAreaAngleType();
        queryClassInfoByGrade();

    });
    
	var videopath = "";
	var swfplayer = videopath + "videos/flowplayer-3.1.1.swf";
	
    function queryRecord(){
//        alert(1);
        queryStudentAreaAnlgeRecord(page_id);
    }
    J(function () {
        J('#input1').calendar({ maxDate:'#input2'});
        J('#input2').calendar({ minDate:'#input1'});
    });

    function opcal() {
        J.calendar.Show();
    }

    function CurentTime()
    {
        var now = new Date();

        var year = now.getFullYear();       //年
        var month = now.getMonth() + 1;     //月
        var day = now.getDate();            //日
        var clock = year + "-";
        if(month < 10)
            clock += "0";
        clock += month + "-";
        if(day < 10)
            clock += "0";
        clock += day + " ";
        return(clock);
    };

    //翻页响应
    function pageselectCallback(page_id, jq){

        queryStudentAreaAnlgeRecord(page_id);
        //return false;

    }

    //视频播放
//    var currentIndex = 0;
//    var player, player2;
//    var currentPlayer, nextPlayer;
//    function onload(video_list){
//
//        console.log("body loaded");
//        player = $("#video");
//        player2 = $("#video2");
//        play();
//        $('#video,#video2').on('ended', function() {
//            currentIndex++;
//            play();
//        }).on('mouseout', function() {
//            $(this).removeAttr('controls');
//        }).on('mouseover', function() {
//            $(this).attr('controls', 'controls');
//        });
//    }


    //预览视频的绑定事件
    function bindingHover(){
        var videoclip='';
        var player='';
        var player2='';
        var data;
        var currentPlayer, nextPlayer;
        var swfplayer = "videos/flowplayer-3.1.1.swf";
        $(".video_link").hover(function(){
                    var $link = $(this);
                    data = $link.parents('tr').data('entity');
                    videoclip=$(this).attr('href');
                    $(this).attr({"href":"#video_box"});
                },

                function(){
                    $(this).attr({"href":""+videoclip+""});
                });

        $(".video_link").fancybox({
            'hideOnContentClick':false,
            'overlayOpacity' :0.6,
            'zoomSpeedIn'    :400,
            'zoomSpeedOut'   :400,
            'easingIn'		 : 'easeOutBack',
            'easingOut'		 : 'easeInBack',
            'callbackOnShow' :function(){
                console.log(data.videoPathList);
                console.log("body loaded");
                var currentIndex = 0;
                var player, player2;

                var video_list = data.videoPathList;

                var player = $('<video id="idle_video" style="float:left;"></video>');
                var player2 = $('<video id="idle_video2" style="float:left;display:none"></video>');

                play();
                currentPlayer.get(0).onended = function() {
                    currentIndex++;
                    play();
                };
                nextPlayer.get(0).onended = function() {
                    currentIndex++;
                    play();
                };
                currentPlayer .mouseout(function() {
                    $(this).removeAttr('controls');
                });
                currentPlayer .mouseover(function() {
                    $(this).attr('controls', 'controls');
                });
                nextPlayer .mouseout(function() {
                    $(this).removeAttr('controls');
                });
                nextPlayer .mouseover(function() {
                    $(this).attr('controls', 'controls');
                });

                function play() {
                    if (currentIndex >= video_list.length) {
                        return;
                    }
                    if (currentIndex === 0) {
                        currentPlayer = player;
                        nextPlayer = player2;
                        currentPlayer.attr('src', video_list[currentIndex]);
                    } else {
                        var temp = currentPlayer;
                        currentPlayer = nextPlayer;
                        nextPlayer = temp;
                    }
                    nextPlayer.hide();
                    currentPlayer.get(0).play();
                    //currentPlayer.removeAttr('controls');
                    currentPlayer.show();
                    $('.videoLl').css('background','white');
                    $('.videoLl').eq(currentIndex).css('background','blue');
                    // setTimeout(function() {
                    //     currentPlayer.attr('controls', 'controls');
                    // }, 200);
                    console.log('currentIndex', currentIndex);
                    console.log('current video', currentPlayer.attr('src'));
                    if (currentIndex + 1 < video_list.length) {
                        nextPlayer.attr('src', video_list[currentIndex + 1]);
                    }
                }
                $('#fancy_div').append(currentPlayer);
                $('#fancy_div').append(nextPlayer);
                var $ul = $('<ul  style="width:80px; float:right; color:#000;"></ul>');
                for (var i=0; i < video_list.length; i++) {
                    var $li = $('<li class="videoLl" data-url="' + video_list[i] + '">视频' + i + '</li>');
                    $li.click((function (index) {
                        return function () {
                            $('.videoLl').css('background','white');
                            $(this).css('background','blue');
                            currentIndex = index;
                            currentPlayer.attr("src", video_list[index]);
                            currentPlayer.get(0).play();
                        }
                    })(i));
                    $ul.append($li);
                }
                $('#fancy_div').append($ul);
                $('.videoLl').css('background','white');
                $('.videoLl').eq(currentIndex).css('background','blue');
                currentPlayer.attr("src", video_list[currentIndex]);
                currentPlayer.get(0).play();


//                $('videoUl').get(currentIndex).css('background','blue');

//                $('#fancy_close').click(function(){
////                    currentPlayer.get(0).removeEventListener;
//
//                    $("#fancy_div_api").remove();
//                });

            },
            'callbackOnClose':function(){
                currentPlayer.get(0).pause();
                currentPlayer.attr("src", null);
                currentPlayer.attr("src", null);
                $("#fancy_div_api").remove();
            }
        });
    }
    function backhome(){
        window.location.href = 'Homepage.html';
        localStorage.removeItem('pid');
        localStorage.removeItem('gname');
        localStorage.removeItem('tname');
        localStorage.removeItem('picurl');
    }
</script>